<!DOCTYPE html>
<!-- 1) xmlns:th 선언 -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>숙소 작성</title>

    <!-- 2) SDK URL을 한 줄로, |...| 내부에 개행 없이 -->
    <script
            th:src="@{|https://dapi.kakao.com/v2/maps/sdk.js?appkey=${appKey}&libraries=services&autoload=false|}"
            defer>
    </script>
    <!-- 주소 배열 바인딩 -->
    <script th:inline="javascript" defer>
        window.addresses = /*[[${addresses}]]*/ [];
        //[]로 구성된 parameterName을 스프링이 이해할 수 있는 .형식으로 적절하게 변환해서
        //MutablePropertyValues에 에러 없이 집어 넣을 수 있게하고, DataBinder를 통해 모델 객체로 바인딩하게 해줌
        //제약조건: []안에 들어가는 parameterName이 숫자로 시작하면 안됨!
    </script>

    <!-- 3) GeocoderSearch.js 로직 -->
    <script th:src="@{/js/GeocoderSearch.js}" defer></script>
    <link rel="stylesheet" th:href="@{/css/Hamburger.css}">
    <script th:src="@{/js/Hamburger.js}" defer></script>
    </head>
    <body>
    <h1>숙소 작성 페이지</h1>

    <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- 메뉴 -->
    <nav class="menu" id="menu">
        <div class="close-btn" id="closeBtn">&times;</div>
        <ul>
            <li><a href="/">홈</a></li>
            <li><a href="/user/profile">내정보</a></li>
            <li><a href="/post/list">숙소 리스트</a></li>
            <li><a href="/post/register">숙소 등록하기</a></li>
            <li><a href="#">문의</a></li>
        </ul>
    </nav>

    <!-- 4) th:action, th:if 에는 ${…} 필요 -->
    <form th:action="@{/post/create}"
          method="post"
          th:if="${loggedInUser != null}">
        <input type="hidden"
               th:name="${_csrf.parameterName}"
               th:value="${_csrf.token}"/>

        <label for="lodging">숙소 주소</label>
        <!-- readonly 로 직접 수정 불가하게 -->
        <input type="text"
               id="lodging"
               name="lodging"
               placeholder="검색 버튼으로 주소를 입력하세요."
               readonly
               required/>
        <br/>

        <!-- 5) 검색 버튼은 type="button" 으로 폼 제출 방지 -->
        <div style="margin-top:20px;">
            <input type="text"
                   id="searchKeyword"
                   placeholder="주소를 입력하고 검색 버튼을 누르세요"
                   style="width:300px;"/>
            <button type="button" id="searchButton">검색</button>
        </div>

        <label for="title">제목</label>
        <input type="text"
               id="title"
               name="title"
               placeholder="제목을 입력하세요."
               required/>
        <br/>
        <label for="content">내용</label>
        <textarea id="content"
                  name="content"
                  placeholder="내용을 입력하세요."
                  required></textarea>
        <br/>

        <button type="submit">작성 완료</button>
    </form>

    <!-- 6) 지도를 폼 바깥으로 빼도 좋고, 안에 두셔도 무방합니다 -->
    <div id="map"
         style="width:600px; height:400px; margin-top:20px;">
    </div>
</body>
</html>
